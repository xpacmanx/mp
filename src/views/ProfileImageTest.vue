<template>
  <div class="profile-image-test">
    <div class="max-w-2xl mx-auto p-8">
      <h1 class="text-3xl font-bold mb-8 text-center">–¢–µ—Å—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ —Ñ–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è</h1>
      
      <div class="bg-white border rounded-lg p-6 shadow-sm">
        <h2 class="text-xl font-semibold mb-4">–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –∫—Ä–æ–ø–ø–µ—Ä –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è</h2>
        <p class="text-gray-600 mb-6">
          –≠—Ç–æ—Ç –∫—Ä–æ–ø–ø–µ—Ä –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
          –ë–µ–∑ –∫–Ω–æ–ø–æ–∫ –ø–æ–≤–æ—Ä–æ—Ç–∞, –æ—Ç—Ä–∞–∂–µ–Ω–∏—è –∏ —Å–±—Ä–æ—Å–∞.
        </p>
        
        <ProfileImageCropper 
          @photo-cropped="onPhotoCropped"
          @photo-cancelled="onPhotoCancelled"
        />
        
        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç -->
        <div v-if="croppedImage" class="mt-8 p-4 bg-green-50 border border-green-200 rounded-lg">
          <h3 class="font-semibold text-green-800 mb-3">–†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏:</h3>
          <div class="flex items-center gap-4">
            <div class="w-16 h-16 rounded-full overflow-hidden border-2 border-green-300">
              <img :src="croppedImage" alt="–†–µ–∑—É–ª—å—Ç–∞—Ç" class="w-full h-full object-cover" />
            </div>
            <div class="text-sm text-green-700">
              <p><strong>DataURL —Ä–∞–∑–º–µ—Ä:</strong> {{ (croppedImage.length / 1024).toFixed(1) }} KB</p>
              <p><strong>–°—Ç–∞—Ç—É—Å:</strong> –ì–æ—Ç–æ–≤–æ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä</p>
            </div>
          </div>
          <button 
            @click="resetTest" 
            class="mt-3 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors"
          >
            –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ
          </button>
        </div>
        
        <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ -->
        <div class="mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg">
          <h3 class="font-semibold text-blue-800 mb-3">–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ñ–∏–ª—å–Ω–æ–≥–æ –∫—Ä–æ–ø–ø–µ—Ä–∞:</h3>
          <ul class="text-blue-700 text-sm space-y-1">
            <li>‚úÖ –¢–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: –∑–∞–≥—Ä—É–∑–∫–∞, –∫–∞–¥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ</li>
            <li>‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ 1:1</li>
            <li>‚úÖ –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –æ–±–ª–∞—Å—Ç–∏</li>
            <li>‚úÖ –ü—Ä–µ–≤—å—é –≤ –¥–≤—É—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö: –∫—Ä—É–≥–ª—ã–π –ø—Ä–æ—Ñ–∏–ª—å –∏ –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ –¥–æ—Å—å–µ</li>
            <li>‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è 400x400px –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏</li>
            <li>‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ (JPG, PNG –¥–æ 10MB)</li>
            <li>‚ùå –£–±—Ä–∞–Ω—ã –∫–Ω–æ–ø–∫–∏ –ø–æ–≤–æ—Ä–æ—Ç–∞, –æ—Ç—Ä–∞–∂–µ–Ω–∏—è –∏ —Å–±—Ä–æ—Å–∞</li>
            <li>‚ùå –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</li>
          </ul>
        </div>
      </div>
      
      <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
      <div class="mt-8 text-center">
        <router-link 
          to="/canvas-cropper" 
          class="inline-block px-6 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors mr-4"
        >
          ‚Üê –ü–æ–ª–Ω—ã–π –∫—Ä–æ–ø–ø–µ—Ä
        </router-link>
        <router-link 
          to="/users" 
          class="inline-block px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"
        >
          –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚Üí
        </router-link>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue'
import ProfileImageCropper from '../components/ProfileImageCropper.vue'

const croppedImage = ref('')

const onPhotoCropped = (imageDataUrl) => {
  croppedImage.value = imageDataUrl
  console.log('üéâ –§–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è –≥–æ—Ç–æ–≤–æ:', imageDataUrl.substring(0, 50) + '...')
}

const onPhotoCancelled = () => {
  console.log('‚ùå –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ')
}

const resetTest = () => {
  croppedImage.value = ''
}
</script>

<style scoped>
.profile-image-test {
  min-height: 100vh;
  background: #f8fafc;
  font-family: 'Inter', system-ui, sans-serif;
}
</style> 